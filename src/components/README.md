# Components Directory Guide

This directory contains all React components for the neighborhoodOS frontend, organized by feature and domain.

## Organization Philosophy

Components are organized **by feature/domain**, not by technical role. This makes it easier to:
- Find related components quickly
- Understand which components belong to which features
- Move or refactor entire features at once
- Onboard new developers faster

## Folder Structure

```
components/
├── ui/                  # Shared UI primitives (shadcn/ui + Radix)
├── layout/             # App layout components (Header, Sidebar, MainLayout)
├── auth/               # Authentication components
├── onboarding/         # User onboarding flow
├── waitlist/           # Waitlist signup components
│
├── activity/           # Activity feed components
├── calendar/           # Calendar-specific components
├── event/              # Event detail and management
├── events/             # Event forms and utilities
│
├── skills/             # Skills directory components
├── mutual-support/     # Skill exchange components
│
├── neighbors/          # Neighbor directory
├── groups/             # Groups feature
│
├── settings/           # Settings pages
├── admin/              # Admin dashboard
├── debug/              # Debug and testing panels
│
├── invite/             # Invitation flows
├── notifications/      # Notification system
├── share/              # Social sharing components
│
└── [standalone files]  # Simple, shared components
```

## Component Categories

### UI Primitives (`/ui`)

**Purpose:** Low-level, reusable UI components from shadcn/ui

**Characteristics:**
- Based on Radix UI primitives
- Styled with Tailwind CSS
- Accessible by default (ARIA, keyboard navigation)
- No business logic
- Highly composable

**Examples:**
- `button.tsx` - Button component
- `dialog.tsx` - Modal/dialog
- `sheet.tsx` - Slide-in panel
- `popover.tsx` - Floating content
- `toast.tsx` / `sonner.tsx` - Toast notifications
- `form.tsx` - Form components
- `input.tsx`, `select.tsx`, `checkbox.tsx` - Form inputs

**Important:** Don't modify these directly! Instead:
- Compose them into higher-level components
- Create feature-specific wrappers
- Override styles with Tailwind classes

**Source:** Generated by shadcn/ui CLI, can be regenerated

### Layout Components (`/layout`)

**Purpose:** App-level layout structure

**Key Components:**
- `MainLayout.tsx` - Primary app layout wrapper
- `ModuleLayout.tsx` - Layout for feature modules
- `Header.tsx` - App header/navigation
- `Sidebar.tsx` - Collapsible sidebar navigation
- `sidebar/` folder - Sidebar sub-components

**Usage:**
```typescript
<MainLayout>
  <YourPageContent />
</MainLayout>
```

### Feature Modules

Each major feature gets its own folder with related components.

#### Calendar & Events (`/calendar`, `/event`, `/events`)

**Three related folders:**
- `/calendar` - Calendar view components (month view, week view, day cells)
- `/event` - Event detail sheets, RSVP buttons, attendee lists
- `/events` - Event creation/edit forms

**Why split?** Different concerns:
- Calendar: Display and navigation
- Event: Individual event interactions
- Events: Event data management

**Key Components:**
- `calendar/MonthView.tsx` - Monthly calendar grid
- `event/EventSheetContent.tsx` - Event detail sheet
- `event/RSVPButton.tsx` - RSVP functionality
- `events/EventForm.tsx` - Create/edit event form

#### Skills (`/skills`, `/mutual-support`)

**Purpose:** Skills directory and skill exchange features

**Key Components:**
- `skills/` - Skills browsing, filtering, detail views
- `mutual-support/` - Skill exchange scheduling and management

**Complex structure:** Skills has many sub-folders because it's a rich feature with multiple views.

#### Neighbors & Groups (`/neighbors`, `/groups`)

**Purpose:** People directory and community groups

**Key Components:**
- `neighbors/NeighborCard.tsx` - Neighbor profile card
- `neighbors/NeighborProfileDialog.tsx` - Full profile view
- `neighbors/UserDirectory.tsx` - Directory listing
- `groups/GroupCard.tsx` - Group preview card
- `groups/GroupSheetContent.tsx` - Group detail view
- `groups/CreateGroupForm.tsx` - Group creation

**Note:** Groups are accessed via the neighbors route (`/neighbors`)

### User Flows

#### Onboarding (`/onboarding`)

**Purpose:** New user welcome and setup flow

**Structure:**
- `OnboardingDialog.tsx` - Main onboarding container
- `survey/` - Survey questions and steps
- `steps/` - Individual onboarding steps
- `navigation/` - Step navigation components

**Triggered:** When a new user first logs in

#### Authentication (`/auth`)

**Purpose:** Login, signup, password reset

**Key Components:**
- `AuthForm.tsx` - Login/signup form
- `ProtectedRoute.tsx` - Route guard (auth required)
- `NeighborhoodAwareProtectedRoute.tsx` - Route guard (auth + neighborhood required)
- `PasswordInput.tsx` - Password field with show/hide toggle

#### Waitlist (`/waitlist`)

**Purpose:** Pre-launch signup and survey

**Used:** On public landing page before users are invited

### Administrative

#### Settings (`/settings`)

**Purpose:** User preferences and configuration

**Large folder:** Contains many setting sub-pages

**Key Areas:**
- Profile settings
- Notification preferences
- Privacy settings
- Neighborhood settings (for admins)

#### Admin (`/admin`)

**Purpose:** Neighborhood admin dashboard

**Key Components:**
- `AdminDashboard.tsx` - Admin home
- `AdminMembers.tsx` - Member management
- `AdminInvitations.tsx` - Invitation management
- `AdminSettings.tsx` - Neighborhood configuration

**Access:** Only visible to neighborhood admins

#### Debug (`/debug`)

**Purpose:** Development and testing tools

**Components:**
- `EmailTestingPanel.tsx` - Test email sending
- `RLSDiagnosticsPanel.tsx` - Test database permissions
- `ActivityDebugPanel.tsx` - Debug activity feed

**Access:** Usually hidden in production

### Shared/Standalone Components

Some components are simple enough to not need a folder:

- `Header.tsx` - App header (different from `layout/Header.tsx`)
- `HomePage.tsx` - Home page component
- `EventCard.tsx` - Event preview card
- `AddEventDialog.tsx` - Quick event creation
- `InviteDialog.tsx` - Invitation dialog
- `QuickActions.tsx` - Quick action buttons
- `ErrorBoundary.tsx` - Error boundary wrapper

## Naming Conventions

### Component Files
- **PascalCase** for component files: `NeighborCard.tsx`
- **Descriptive names**: `EventSheetContent.tsx` not `Sheet.tsx`
- **Suffix with type** when helpful: `EventForm.tsx`, `CreateGroupDialog.tsx`

### Folders
- **Lowercase with hyphens**: `mutual-support/`, `physical-units/`
- **OR singular feature name**: `skills/`, `events/`, `groups/`
- **Plural when it's a collection**: `neighbors/`, `groups/`
- **Singular when it's a category**: `event/` (event-related components)

### Sub-folders

Common sub-folder patterns:

```
feature/
├── components/       # Sub-components specific to this feature
├── hooks/           # Feature-specific hooks
├── utils/           # Feature-specific utilities
├── types/           # Feature-specific types
├── form/            # Form-related components
├── details/         # Detail view components
└── index.ts         # Exports (optional)
```

## When to Create a New Folder

**Create a folder when:**
- Feature has 5+ related components
- Feature has clear boundaries and sub-components
- You need to organize by sub-features
- Feature-specific hooks/utils/types exist

**Don't create a folder when:**
- Only 1-2 components
- Component is truly standalone
- Component is shared across many features (might belong in root or `/ui`)

## Component Composition Patterns

### 1. Container/Presentation Pattern

**Container** (smart component):
- Fetches data
- Manages state
- Handles business logic

**Presentation** (dumb component):
- Receives data via props
- Renders UI
- Emits events

**Example:**
```typescript
// Container
export function EventListContainer() {
  const { data: events, isLoading } = useNeighborhoodQuery(
    ['events'],
    fetchEvents
  );
  
  return <EventList events={events} isLoading={isLoading} />;
}

// Presentation
export function EventList({ events, isLoading }) {
  return (
    <div>
      {events.map(event => <EventCard key={event.id} event={event} />)}
    </div>
  );
}
```

### 2. Compound Component Pattern

Used in UI primitives:

```typescript
<Dialog>
  <DialogTrigger>Open</DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Title</DialogTitle>
    </DialogHeader>
    Content here
  </DialogContent>
</Dialog>
```

### 3. Render Props Pattern

Less common, but used for flexibility:

```typescript
<DataLoader
  render={(data) => <YourComponent data={data} />}
/>
```

### 4. Hooks Pattern

Extract logic into custom hooks:

```typescript
function EventCard({ event }) {
  const { rsvp, isLoading } = useEventRSVP(event.id);
  
  return <button onClick={rsvp}>RSVP</button>;
}
```

## Common Component Types

### Sheets (Slide-in Panels)

**Pattern:** `[Feature]SheetContent.tsx`

**Examples:**
- `EventSheetContent.tsx` - Event details
- `NeighborSheetContent.tsx` - Neighbor profile
- `GroupSheetContent.tsx` - Group details

**Usage:**
```typescript
<Sheet>
  <SheetContent>
    <EventSheetContent eventId={id} />
  </SheetContent>
</Sheet>
```

### Dialogs (Modals)

**Pattern:** `[Action][Feature]Dialog.tsx`

**Examples:**
- `CreateGroupDialog.tsx`
- `EditEventDialog.tsx`
- `InviteDialog.tsx`

### Forms

**Pattern:** `[Feature]Form.tsx`

**Examples:**
- `EventForm.tsx`
- `CreateGroupForm.tsx`
- `ProfileForm.tsx`

**Uses:** React Hook Form + Zod validation

### Cards

**Pattern:** `[Feature]Card.tsx`

**Examples:**
- `EventCard.tsx` - Event preview
- `NeighborCard.tsx` - Neighbor preview
- `GroupCard.tsx` - Group preview

**Purpose:** Preview/summary view of an item

## Import Patterns

### Within Components Directory

```typescript
// Import UI primitives
import { Button } from '@/components/ui/button';
import { Dialog, DialogContent } from '@/components/ui/dialog';

// Import feature components
import { EventCard } from '@/components/EventCard';
import { NeighborCard } from '@/components/neighbors/NeighborCard';

// Import from same feature folder
import { EventForm } from './EventForm';
import { validateEventData } from './utils/validation';
```

## State Management in Components

### Local State (useState)

For simple, component-only state:

```typescript
const [isOpen, setIsOpen] = useState(false);
```

### Data Fetching (React Query)

For server data:

```typescript
const { data, isLoading } = useNeighborhoodQuery(
  ['events'],
  fetchEvents
);
```

### Context (useContext)

For data from parent tree:

```typescript
const { neighborhoodId } = useNeighborhoodContext();
```

### Zustand Stores

For global UI state:

```typescript
const isSidebarOpen = useStore((state) => state.sidebarOpen);
```

## Testing Components

(Future: Add testing patterns when test suite is set up)

## Common Mistakes to Avoid

1. **Don't hardcode routes** - Use `routes.ts`
2. **Don't skip TypeScript** - Type your props
3. **Don't put business logic in components** - Use services or hooks
4. **Don't duplicate UI components** - Check `/ui` first
5. **Don't fetch data directly in components** - Use hooks or React Query
6. **Don't modify `/ui` components directly** - Compose or wrap them

## Related Documentation

- [src/README.md](../README.md) - Frontend overview
- [CONTRIBUTING.md](../../CONTRIBUTING.md) - Coding conventions
- [ARCHITECTURE.md](../../docs/ARCHITECTURE.md) - System architecture

